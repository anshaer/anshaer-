<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="version" content="0.6.1-rc+2024.12.24.03.00.30" >


    <title>YouTube Player with Playlist and BGM</title>
<!-- Version: 0.6.1-rc+
Build Date: 2024.12.24.03.00.30
 -->

    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #1a1a1a;
            color: #e0e0e0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .status-indicator {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
        }
        .container {
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 20px;
            width: 100%;
            max-width: 1200px;
        }
        .player-section, .playlist-section {
            flex: 1;
        }
        .input-container {
            margin-bottom: 20px;
            text-align: left;
            width: 100%;
            max-width: 1200px;
        }
        input {
            width: 70%;
            padding: 10px;
            font-size: 16px;
            margin-right: 10px;
            background-color: #2a2a2a;
            color: #e0e0e0;
            border: 1px solid #444;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        iframe {
            width: 100%;
            height: 450px;
            border: none;
        }
        .playlist {
            background-color: #2a2a2a;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 10px;
            max-height: 450px;
            overflow-y: auto;
        }
        .video-card {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .video-card:hover {
            background-color: #3a3a3a;
        }
        .thumbnail {
            width: 80px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
        }
        .video-title {
            flex: 1;
            text-align: left;
            font-size: 14px;
            color: #e0e0e0;
        }
        .bgm-container {
            margin-top: 20px;
            width: 100%;
            max-width: 1200px;
            text-align: left;
            background-color: #2a2a2a;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 10px;
        }
        h1, h2, h3 {
            color: #ffffff;
        }

        .popup {
            display: none;
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid #ccc;
            padding: 20px;
            background-color: #4d4d4d;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .overlay {
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        .question-icon {
            color: yellow;
            font-size: 24px;
            cursor: pointer;
        }

        .popup p{
            color: #fff; 
        }
        .popup h2{
            color: #6cf246;
        }
        .popup h3{
            color: #03f8fc;
        }
        .popup s{
            color: #fc870a; 
        }

    </style>
    <script src="https://www.youtube.com/iframe_api"></script>
</head>
<body>
  <div class="status-indicator" id="statusIndicator">Status: None</div>
    <h1>歌回用BGM撥放</h1>

    <div class="container">
        <div class="player-section">
            <div id="youtubePlayer"></div>
        </div>
        <div class="playlist-section">
            <h3>YT播放清單(限用YT連結)</h3>
            <div class="input-container">
                <input type="text" id="youtubeUrl" placeholder="Enter YouTube URL here">
                <button onclick="addToPlaylist()">Add to Playlist</button>
            </div>
            <div class="playlist" id="playlistContainer"></div>
        </div>
    </div>

    <div class="bgm-container">
        <h2>BGM Player</h2>
        <input type="file" id="bgmInput" accept="audio/*">
        <audio id="bgmPlayer" controls loop>
            Your browser does not support the audio element.
        </audio>
    </div>


<footer>
    <p>Version: 0.6.1-rc+2024.12.24.03.00.30



<span id="openPopup" class="question-icon">❓</span>

    <div id="popup" class="popup">

<h2>網頁介紹</h2>
<p>這個網頁旨在為用戶提供一個整合的音樂與影片播放平台。您可以使用此頁面播放 YouTube 視頻，建立個人化播放清單，並添加背景音樂 (BGM) 以營造更豐富的視聽體驗。</p>
<p><s>靈感絕不是來自我推</br>
唱完歌忘記開BGM</br>
或唱歌忘記關BGM</s> </p>
<h2>使用說明</h2>
<h3>添加 YouTube 視頻至播放清單</h3>
<p>1.在播放清單部分的輸入框中，輸入有效的 YouTube 視頻連結。</p>
<p>2.點擊「Add to Playlist」按鈕，該視頻將自動添加至播放清單中。</p>
<p>3.點擊播放清單中的任一視頻，即可在播放器中播放。</p>


<h3>背景音樂播放器 (BGM Player)</h3>
<p>1.在「BGM Player」區域，點擊「Choose File」上傳本地音樂檔案（格式支援 MP3 等）。</p>
<p>2.上傳後，音樂將自動播放，並在循環模式下運行。</p>
<p>3.如果 YouTube 播放器正在播放，背景音樂將自動暫停，待視頻播放結束後恢復。</p>
        <button id="closePopup">X</button>
    </div>
    <div id="overlay" class="overlay"></div>

</p>
</footer>
    <div>
        <p>
            Developer:Anshaer王杯杯
        </p> 
        <P>
            Suggestions:
<a href="mailto:ggh19950808@gmail.com">ggh19950808@gmail.com</a>
        </P>
    </div>
 
    <script>
        let player;
        const playlistContainer = document.getElementById('playlistContainer');
        const bgmPlayer = document.getElementById('bgmPlayer');
        const bgmInput = document.getElementById('bgmInput');
        const statusIndicator = document.getElementById('statusIndicator');

        function updateStatusIndicator(status) {
            statusIndicator.textContent = `Status: ${status}`;
        }


        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtubePlayer', {
                height: '450',
                width: '100%',
                events: {
                    onStateChange: onPlayerStateChange
                }
            });
        }

        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.PLAYING) {
                bgmPlayer.pause();
                updateStatusIndicator('YouTube Audio');
            } else if (event.data === YT.PlayerState.ENDED || event.data === YT.PlayerState.PAUSED) {
                if (bgmPlayer.src) {
                    bgmPlayer.play();
                    updateStatusIndicator('BGM Audio');
                } else {
                    updateStatusIndicator('None');
                }
            }
        }


        bgmInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                bgmPlayer.src = URL.createObjectURL(file);
                bgmPlayer.play();
                updateStatusIndicator('BGM Audio');
            }
        });

        bgmPlayer.addEventListener('play', () => {
            if (player && player.getPlayerState() === YT.PlayerState.PLAYING) {
                bgmPlayer.pause();
                updateStatusIndicator('YouTube Audio');
            } else {
                updateStatusIndicator('BGM Audio');
            }
        });
        async function fetchVideoTitle(videoId) {
            try {
                const response = await fetch(`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${videoId}&format=json`);
                const data = await response.json();
                return data.title;
            } catch (error) {
                console.error('Error fetching video title:', error);
                return 'Unknown Title';
            }
        }

        function playVideo(videoId) {
            player.loadVideoById(videoId);
        }

        async function addToPlaylist() {
            const urlInput = document.getElementById('youtubeUrl');
            const url = urlInput.value;
            const videoId = extractVideoId(url);

            if (videoId) {
                const videoTitle = await fetchVideoTitle(videoId);
                const videoThumbnail = `https://img.youtube.com/vi/${videoId}/default.jpg`;

                const videoCard = document.createElement('div');
                videoCard.className = 'video-card';
                videoCard.onclick = () => playVideo(videoId);

                const thumbnail = document.createElement('img');
                thumbnail.src = videoThumbnail;
                thumbnail.alt = 'Video Thumbnail';
                thumbnail.className = 'thumbnail';

                const title = document.createElement('div');
                title.className = 'video-title';
                title.textContent = videoTitle;

                videoCard.appendChild(thumbnail);
                videoCard.appendChild(title);
                playlistContainer.appendChild(videoCard);

                // Clear input for next URL
                urlInput.value = '';
            } else {
                alert('Please enter a valid YouTube URL!');
            }
        }

        function extractVideoId(url) {
            const regex = /(?:https?:\/\/)?(?:www\.|m\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }


        // JavaScript 功能
        document.getElementById('openPopup').addEventListener('click', function () {
            document.getElementById('popup').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        });

        document.getElementById('closePopup').addEventListener('click', function () {
            document.getElementById('popup').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        });

        document.getElementById('overlay').addEventListener('click', function () {
            document.getElementById('popup').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        });



app.use((req, res, next) => {
    res.locals.version = process.env.NODE_ENV === 'development' ? '0.6.1-rc+2024.12.24.03.00.30' : '';
    next();
});

    </script>
</body>
</html>






<!--
:::::::::::::::::::::::-:---:---------------:-:---:::-----::--::----:--:::---:------::::::::::::::::
:::::::::::::::::::::::::------------------::::--:::-:----::--:::--:-:::::::----:---::::::::::::::::
::::::::::::::::::::-:::----:--------------:::::::::-::::-::-::::--::::=-::::-------::::::::::::::::
::::::::::::::::::::-:-::----:------:------::=::::::::::::::::::::::::++=:::--------::::::::::::::::
:::::::::::::::::::-----------------------::::-:::::::::::::::::::::-++=-:::-------:--::::::::::::::
::::::::::::::::::::---------------------::::::-::..::::::::::..:::-**=--::----------:::::::::::::::
::::::::::::::::---::---:---:--------:-::::::::-=:...:.........:.:=**+---::---------:-::::::::::::::
:::::::::::::::::----:---:---:--------:-:::::::-==...........::::=+*+==--:::---------:::::::::::::::
:::::::::::::::---------------:::-::-:::::::.::-++=-:.::::::--=++=*+==--::::--:---------::::::::::::
::::::::::::--::---------------:::::::::::::.::-=+=--:::.:::==+++=+=----:::-:::---:-----:-::::::::::
::::::::::::----------:-----:-:--:::::::::...:::===::::...::+++++===----::::::-:-::---::--::::::::::
:::::::::::-::--------------::-:-::::::::::..:-===-:::...::=*+*+++=----:.::::::--:------::::::::::::
:::::::::::------------------::::::::::::....:-=+=:::....::===+++===--=..::::::::-------:--:::::::::
::::::::::----------=----------::::::::.......=+=-:......::-==+*===+===..:::::::--:--------:::::::::
:::::::::::----------:--=----::-::::.:........++=*+-......:-*++===++++:...:::::-::-:----------::::::
:::::::::::-:----------------:::::::..........==::::......:::::-=+++++:.....:::::-:----------:::::::
::::::::::::::---------------:::::::.........:=-:.....::......::-+**=+:.::....::::----------::::::::
:::::::::-----::::----------::-:::...........--:....:::::......:-=++++=........::---:--------:::::::
::::::::::---------::-------:-::::...........-::.....::--......::-=+++=.......::::::------------::::
:::::::-:---:--------:::::::::::.............-:.......--........::-=+++......:::::--------------::::
:::-------------:-:-----::::::::.............-::......:-.::...::::--=+=.....:::::::-----------::::::
::::::--------------:::--:-:::...........:...:::::....-:.....::..:::=+-......::::::--------:::::::::
:::::-----:---=---------:::::::..............::::...::..::...:::::::-=:.......:::::--:--::--------::
:::---------------==------:::::...............:::.:..........::::::::-........::::::::----------::::
::---------=====-==-------:::::................:::::.........:::::::::.........::::---------------::
:::::::-----===========----:::::............ .::::::::::.:..:::::::::.........:::::::::---------::::
::::::::--------------=----:::::..........  ..:::::::::::::.:::::::::...........:::::::-------------
-------------======-----::::::...........   ..:::::::::::::::::::::::.........:::::::::------------:
::::::::::::--:::-:::::::::::::.........     ..---::::::::::::::::::............::::::::::::::::::::
::::::::---------------:::::::............  ...-----:-::::--:::::::::...........::::::::::::::::::::
-------------------------:::::.........:.. ....==-----:::::::::::::::...........::::--------:-------
:::::--------------:::::::::::::.....:.......:===-::::::::::::::.....:..........:::::::-------------
::-----:::-:--:---------=---:::.....::::::..-====-:::.:..:..:........::.........:::--::::--:::::----
:---------==========------::::::...:::::::.:=====-:::...:............:::.......::::::--------------:
---------=====-----=--::----:::.....:.::...====--=::....:...........:..:........:::::---------------
--------------==---======-:::::....:::::..:-===--=::...................::.......:::::-::------------
---------===--=++====--:--::::::...:::::::::==-----:........:.:.......::::.......::::----:----------
----------=+======---=-----:::::...-:--::::--=----=:...................:::....:::::::::-------------
------===-----=--===------:::::....:-**::::--------::....:.............::-....:::::::::::----------:
----------==--===--===--::-::::::..:-*+::-==--=-----:...............:..::--...::::::----::::--------
-------------=--===------:-::::....:::-::-==------:-::..................:-=...::::::::----:-:::-----
-:--------=--==------=-----:::.....:::.:::+=:--------::..:......:.......:==:.::::::---:-------::::--
:---------==----==-------:::.:.....-::.:::=-::-::----::::......::::.....:-=-..::::::--------=---::::
--:-----------==----=--::::::......::...:-=-:::::-:-=-:::......:::::.:.::-+=...::-:-::-------------:
:-----------=---====--:::::::..:...:::..:-==-:-::-----:::......::::.....:-=+....:::::::-------------
::::::--------===----:::::::..:-:-::::..:-==----:----=-:::..:..::-.......:=+.....::::-:-------------
::::--------===-::-::-:::::...:---:-::.:::==-==---:---=-:::....::::......:-=.....::::::------------:
::--:-----=------:-:::::::-:.:-====::::.:-+=====------=-:::::..::-:.......-=::...::::::-------------
:::::------------:::::::.:=-:--====-:::.::+=====----=--=-::::..:--:::::.:::-::...::::::-------------
:::-------------::::::::.-==-======-::::::+=======-===---:::::::--:.......:---..:-:::::::-:---------
::----:----------:::::.-:-==========-:::::+===========--=-::::::-=:......::-=-.:::::::::::::--------
:::::--------:-::::::::-============--::-=+===============---:::==:.....::----:-=-::::::::::--------
:::::-------:-::::::-:--=====+====++==---=++===============-----==-:.::.:::-=====--::::::::::-------
:::::-------::::::::-:-===++-::=------=+=+++++===========++=----=--:::..::--======-:::::-:::::------
::::-------:::::::::=:-==-.::-=--:-----=+++++++===+=========----:::.:.::::--======-::---:::::::-----
:::::-----::::::::::=:==::.:-==---=-=-===++++++=+=-::...--:::::.......:::---+=========--::::::::----
:::::-----:::::::::-=-=-:::-==-----=-=-==+++++++++-:..........::...::.:::--+=+========-:::::::::----
::::::::::::::-::-::-:=::::====---=========+++++=:::.....:.....:..:.:::--====-++======-:::::::::--::
....::::::::--::::-::::::::=++===-=-===-=====+*+-:.......::....::::::-:-==+==--=======-::::::::::...
.....:::::--::::::-::::-:::=++===--====-======++=:.:::..:::::::::::----=====-=-==+====-::::::::.....
.....::::-::::-:-:---:::-::-=+=++==-===----==++++:-::::::::::::--:---=+======---=====---::::::......
......:--:::::::-:---:::-:::-=+++==----=========+=---------------===+=====-=----=====--::::::.....  
....::::::::::::---=-:::-:::-=++=====--======-===================++======-------=+===-:::-::..      
.:::...:::::::-:---=--::--::-=++++==-=-==-============+++==++========-====--=---++==-::::::... ... .
::.......::::....--=---:------+++++====---=-==-=-========-=-=========--=----:---++=+-:::-::.....:...
...  ....:::.......----:----===+++++===-=-----=---=-==---==-==--==-==-------====+++-::--=::.........
.... .....:.........-----=--====+++++==-+===--=----------==-------:-=--:-=--====++=::---=::.........
......  ..-..:......----==:::+=+++++++****++===--=--==---==-------:-===--=======+-::-----::::::...:-
......  ..:....  ...:---+=:::-++++++++******++==-==-=-===-=---------======+=====::::--===::...::..:.
..........:......  ..==-=-::::=+++++==+******+====-==--===-====-==-=======+===-::::---=--.......::..
.........::.:.......:====-::-:=+**++::=******++=========+==========-====++++=-:::-:-==--:.. .. ..:. 
........::::::......-=----:--:-++++-:::-++***++===================-::====++==:::--:-=--:...     .:. 
.....:::::..:::....:-=----:---:+++=:-:::-++**++====-::========+==-::::====+=-::-----=--:... .  ..:..
.......:.......::::-------:----++=---::::-+*+++==-:::::--+======----:::-====:::--:::=--:.....  ..:..
................:--:....-------++----::::::+++==::::-::::-==++=-----::::-==-----......::...... ..:. 
.........:::....::........:----=+-----::-:::=+=:::::--::::-=+=--------::-==----:.......:...... ..:. 
............:........:.....-----------:-----===------------===-----------==----.........-.......:...
............:......:.:::...:----:-----------=+--------------==--------:....:---..........:...::.... 
............:..........:....----:------:--------------------=--------........--....:::...:..........
  .....................::....---:------:----------------------------....   ...-...-........  .......
.......................::....--------------=-----------------------......  ....-.::........  .......
   ........:...........:...:---:-----===--==---------=---:::------:...::.......:........... ...::::.
      ...:............::..::......----==-=+---:-------........:--:...::..:..  .:..:........ ....::..
     ................::..:.........:--====----:-----...........:-:...-......  ....::...........:....
    ...............::....:...:::....----=-----:----.............::...:......  .....::::........:....
   ...........::........:.......:...:---------:---..... ...... .....::...   .........:....::........
. ..............:.......:...:....:...:--------:::-............  :....:... ....:... ......:..........
.................:......:........:...::--:::::::::.....:.............::......::.....................
..................:..  ..:....  .:. .:::-:::::::::....:.. .......:....::....:..............  . . .. 
.... ................  ..:.... ......:::-:::::::::....:.. .......:......::::.....:.....:...  .....  
.... .... ...... ..:.  ..............:::::::::::::....:..... ...................................... 
...  ....  ..... ..:.  ..............:...:::::::::.........  .........      ......     ......  .....
...  ....  ....  ..:.  ...................::::::::.........  ..........    .......     ......   ....
.    .:..   ...  ........ .. ... ...... ....::::.:... .. ..  ..................  ............   ....
     .:..        .........      ........................   .................. .   ......  ...   ....
     ..:.    . .............    ........................  ................... .   ....... ..... ..:.
     ..:......................  .......... .....  ..............   .    ......   .................:.
     ...::.....................................  ...............         .....   .:-::::-:--::::::-.
     .........:................................ ............ ...         ......  .:-::::::-::-:::-:.
      .. ....::...        ......     ..... ..........  ....                ....  ...............::..


 -->
